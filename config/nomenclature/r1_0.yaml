---
# AMPEL360 Space-T Nomenclature Standard R1.0 (v6.0)
# Configuration file with controlled lists (allowlists)
# 
# This file is the single source of truth for:
# - Allowed MODEL values
# - Allowed VARIANT values
# - Allowed VERSION patterns (BL/TS/GN)
# - Allowed BLOCK values
# - Allowed AoR values
# - Allowed TYPE values
# - Allowed STATUS values
# - Allowed file extensions
# - Exemptions (files, directories, patterns)
# - ISSUE-REVISION format
# 
# Changes to this file require Configuration Management WG approval.

version: "6.0"
release: "R1.0"
date: "2025-12-17"
status: "Normative"
owner: "Configuration Management WG"
breaking_changes: "v6.0 introduces MODEL, VERSION (BL/TS/GN), and ISSUE-REVISION fields"

# Controlled lists (allowlists)
allowlists:
  
  # MODEL allowlist (controlled aircraft/system models)
  # Quantum-inspired, passenger-payload-numbered naming
  # QNN format: Q + passenger count (e.g., Q10 = 10 passengers, Q100 = 100 passengers)
  # Extension requires CM change control
  models:
    - Q10        # SPACE-T: Quantum 10-passenger model (current dev focus)
    - Q100       # AIR-T: Quantum 100-passenger model
    - PROTO      # Prototype variants
    - SIM        # Simulation models
    - TEST       # Test models
    - GEN        # Generic/multi-model artifacts
    # Future quantum models: Q20, Q50, Q200, etc. (via CM approval)
  
  # VARIANT allowlist
  # Default: PLUS (AMPEL360+ enhanced configuration)
  # Extension requires CM change control
  variants:
    - PLUS       # AMPEL360+ enhanced configuration
    - CERT       # Certification variant
    - GEN        # General-purpose variant
    - PROTO      # Prototype variant
    - SYS        # System variant
    - SW         # Software variant
    - HW         # Hardware variant
    # Future variants added via CM approval
  
  # BLOCK allowlist (domain classification / module)
  # Extension requires CM change control
  blocks:
    - OPS        # Operations
    - STR        # Structures
    - PROP       # Propulsion
    - AI         # AI/ML Systems
    - DATA       # Data Governance
    - CERT       # Certification
    - SAF        # Safety
    - SW         # Software
    - HW         # Hardware
    - SYS        # Systems Engineering
    - TEST       # Testing/IVVQ
    - MRO        # Maintenance/MRO
    - CIRC       # Circularity
    - ENRG       # Energy
    - STOR       # Storages
    - GEN        # General/Cross-cutting
  
  # AoR allowlist (Area of Responsibility / Portal Entry Points)
  # Must match portal entry points exactly (no STK_ prefix)
  # Extension requires CM change control
  aors:
    - CM           # Configuration Management
    - CERT         # Certification & Authorities
    - SAF          # Safety
    - SE           # Systems Engineering
    - OPS          # Operations
    - DATA         # Data Governance
    - AI           # AI/ML Engineering
    - CY           # Cybersecurity
    - TEST         # IVVQ / Testing
    - MRO          # MRO / Maintenance
    - SPACEPORT    # Spaceport/Airport Operations
    - PMO          # Program Management Office
    - QA           # Quality Assurance
    - SEC          # Security
    - LEG          # Legal
    - FIN          # Finance
    - PROC         # Procurement
  
  # TYPE allowlist (artifact type)
  # Controlled vocabulary for document/artifact types
  # Extension requires CM change control
  types:
    # Planning / Control
    - IDX          # Indexes and catalogs
    - STD          # Standards and specifications
    - PLAN         # Plans (project, safety, management)
    - MIN          # Meeting minutes
    - RPT          # Reports and assessments
    - LOG          # Logs (issue, event, hazard)
    - ACT          # Action item registers
    
    # Safety Analyses
    - FHA          # Functional Hazard Assessment
    - PSSA         # Preliminary System Safety Assessment
    - SSA          # System Safety Assessment
    - FTA          # Fault Tree Analysis
    - ANA          # Engineering analysis and trade studies
    
    # Requirements / Allocation
    - REQ          # Requirements specifications
    - DAL          # Development Assurance Level assignments
    - TRC          # Traceability matrices
    
    # Data / Reference
    - CAT          # Catalogs
    - LST          # Lists and inventories
    - GLO          # Glossaries and terminology
    - MAT          # Material specifications
    - SCH          # Data schemas (JSON, XML)
    - DIA          # Diagrams and flowcharts
    - TAB          # Data tables
    
    # Technical Artifacts
    - SPEC         # Technical specifications
    - PLN          # Technical plans
    - PROC         # Procedures
    - MAN          # Manuals
    - API          # API documentation
    - CFG          # Configuration files
    
    # Data Formats (special case)
    - JSON         # JSON data files
    - YAML         # YAML data files
  
  # STATUS allowlist (document status)
  statuses:
    - TEMPLATE     # Template file for scaffolding
    - DRAFT        # Work in progress
    - ACTIVE       # Current working version
    - APPROVED     # Reviewed and approved
    - RELEASED     # Formally released baseline
    - SUPERSEDED   # Replaced by newer version
    - ARCHIVED     # Retained for historical record
  
  # EXT allowlist (file extensions)
  # GitHub-first policy: only extensions that render well in GitHub
  # Extension requires CM approval and portal renderer alignment
  extensions:
    - md           # Markdown
    - yml          # YAML
    - yaml         # YAML (alternative)
    - json         # JSON
    - csv          # CSV
    - svg          # SVG graphics
    - png          # PNG images
    - jpg          # JPEG images
    - jpeg         # JPEG images (alternative)
    - pdf          # PDF documents
    - drawio       # Draw.io diagrams

# VERSION field patterns (normative)
# Replaces simple version numbering with typed versions
version_patterns:
  baseline:
    pattern: "BL[0-9]{2}"
    regex: "^BL[0-9]{2}$"
    description: "Baseline version (e.g., BL01, BL02)"
    range: [1, 99]
  
  testing:
    pattern: "TS[0-9]{2}"
    regex: "^TS[0-9]{2}$"
    description: "Testing version (e.g., TS01, TS02)"
    range: [1, 99]
  
  generated:
    pattern: "GN[0-9]{2}"
    regex: "^GN[0-9]{2}$"
    description: "Generated/proposed version (e.g., GN01, GN02)"
    range: [1, 99]
  
  combined_pattern: "^(BL|TS|GN)[0-9]{2}$"

# ISSUE-REVISION field format (normative)
issue_revision:
  pattern: "I[0-9]{2}-R[0-9]{2}"
  regex: "^I[0-9]{2}-R[0-9]{2}$"
  description: "Issue and revision tracking (e.g., I01-R01, I05-R03)"
  issue_range: [0, 99]
  revision_range: [0, 99]
  examples:
    - "I00-R00"   # No issue/initial
    - "I01-R01"   # Issue 1, Revision 1
    - "I05-R03"   # Issue 5, Revision 3

# Exemptions (files/directories/patterns excluded from validation)
exemptions:
  
  # Explicit file exemptions
  # These files do not need to follow nomenclature standard
  files:
    - README.md
    - LICENSE
    - EXAMPLES.md
    - STRUCTURE_SUMMARY.md
    - IMPLEMENTATION_SUMMARY.md
    - REVIEW_NOTES.md
    - NOMENCLATURE_V3_AUDIT_REPORT.md
    - .gitignore
    - .gitattributes
    - .gitkeep
    - .editorconfig
    - Dependencies.yaml
    - Traceability_Matrix.csv
    - Prompt_to_Artifact_Map.csv
    - rename_map.csv
    - rename_map_v5.csv
    - rename_map_v6.csv
    - generate_space_t_structure.py
    - validate_nomenclature_v4.py.bak
    - scaffold_v4.py.bak
  
  # Directory exemptions
  # Files in these directories are not validated
  directories:
    - .git
    - .github
    - node_modules
    - __pycache__
    - .pytest_cache
    - .venv
    - venv
    - dist
    - build
    - tools
    - templates       # Template source files
    - scripts         # Utility scripts
    - docs            # Documentation directory
    - config          # Configuration directory
  
  # Pattern exemptions (regex)
  # Files matching these patterns are not validated
  patterns:
    - "generate_.*\\.py"
    - "validate_.*\\.py"
    - ".*_Agent_Config\\.(yaml|json|yml)"
    - ".*_Config\\.(yaml|json|yml)"
    - ".*\\.py[cod]$"
    - ".*-xx_.*"      # Template files with -xx pattern

# KNOT governance (strict enforcement)
knots:
  # Only K01-K14 are allowed in R1.0
  # Any new knot requires Nomenclature Standard upgrade and CM approval
  allowed_range:
    min: 1
    max: 14
  
  # Task suffix format
  task_suffix:
    pattern: "T[0-9]{3}"
    min: 1
    max: 999
  
  # Governance policy
  governance:
    expansion_policy: "Requires Nomenclature Standard upgrade and CM approval"
    change_control: "CM Change Control Board"
    rationale: "Prevents uncontrolled knot proliferation"

# TEKNIA credential governance
teknia:
  # Credential types
  credential_types:
    - BADGE
    - CERT
    - LIC
  
  # Issuance AoR restriction
  issuance_aors:
    - CM
    - CERT
  
  # Schema version
  schema_version: "1.0"
  schema_path: "config/teknia/credential_schema_v1.yaml"
  
  # Binding requirements
  binding:
    required_fields:
      - subject_path
      - subject_sha256
    optional_fields:
      - subject_commit

# Bucket-to-subbucket mapping (phase-vs-block rules)
# Defines which subbucket ranges are valid for each block
# Used for semantic validation
phase_block_mapping:
  
  # Lifecycle phases (LC01-LC14)
  # Available for all blocks when lifecycle scope is appropriate
  lifecycle:
    pattern: "LC(0[1-9]|1[0-4])"
    range: [1, 14]
  
  # Subbuckets (SB01-SB99)
  # Block-specific subbucket ranges (optional constraint)
  # If not specified, any SB01-SB99 is valid for the block
  subbuckets:
    OPS:
      ranges: [[1, 19], [80, 85]]
    STR:
      ranges: [[20, 29]]
    CIRC:
      ranges: [[30, 39]]
    SW:
      ranges: [[40, 49]]
    HW:
      ranges: [[50, 59]]
    STOR:
      ranges: [[60, 69]]
    PROP:
      ranges: [[70, 79]]
    ENRG:
      ranges: [[86, 89]]
    GEN:
      ranges: [[90, 99]]
    # Other blocks: any SB01-SB99 allowed (no constraint)

# ATA_ROOT padding policy
ata_root:
  # 2 digits for values < 100
  # 3 digits for values >= 100
  padding:
    under_100: 2
    hundred_and_above: 3
  
  # Valid range
  range:
    min: 0
    max: 116

# Validation rules
validation:
  strict_mode: true
  enforce_type_vocabulary: true
  enforce_aor_allowlist: true
  enforce_knot_governance: true
  enforce_double_underscore: true
  enforce_status_field: true
  enforce_model_field: true
  enforce_version_pattern: true
  enforce_issue_revision: true
  
  # Confidence thresholds for automated processing
  confidence_thresholds:
    auto_process: 0.95
    manual_review: 0.80
    reject: 0.50
  
  # Validation modes
  modes:
    warn: "Report violations but do not fail"
    block: "Fail on any violation (PR-blocking)"
    report: "Generate detailed report of violations"

# Migration mappings (v5.0 → R1.0/v6.0)
migration:
  # Default MODEL for existing files
  default_model: "GEN"
  
  # VERSION mapping (v5.0 simple version → v6.0 typed version)
  # v01, v02, etc. → BL01, BL02 (assume baseline)
  version_mapping:
    default_type: "BL"  # Assume baseline for existing versions
  
  # Default ISSUE-REVISION for existing files
  default_issue_revision: "I00-R00"
  
  # Default STATUS for existing files (if missing)
  default_status: "ACTIVE"

# Change control
change_control:
  authority: "Configuration Management Working Group"
  approval_required_for:
    - "New MODEL values"
    - "New VARIANT values"
    - "New BLOCK values"
    - "New AoR values"
    - "New TYPE values"
    - "New STATUS values"
    - "New file extensions"
    - "New KNOT IDs (requires standard upgrade)"
    - "VERSION pattern changes"
    - "ISSUE-REVISION format changes"
  
  process:
    - "Submit change request to CM WG"
    - "Review and approval"
    - "Update this config file"
    - "Update tooling (validators, scaffolding)"
    - "Update documentation"
    - "Announce to stakeholders"

# Version history
history:
  - version: "6.0"
    release: "R1.0"
    date: "2025-12-17"
    changes: "R1.0 baseline with MODEL, VERSION (BL/TS/GN), ISSUE-REVISION fields; strict KNOT governance K01-K14"
    author: "CM WG"
    breaking_changes: "14-field format replaces 12-field v5.0 format"
