name: Nomenclature Standard Validation

on:
  push:
    branches: ['**']
  pull_request:
    branches: ['**']

jobs:
  validate-nomenclature:
    runs-on: ubuntu-latest
    name: Validate File Nomenclature
    
    permissions:
      contents: read
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'
      
      - name: Validate all files
        id: validate
        run: |
          echo "Running nomenclature validation..."
          python validate_nomenclature.py --check-all --strict --verbose
        continue-on-error: true
      
      - name: Check validation result
        if: steps.validate.outcome == 'failure'
        run: |
          echo "❌ Nomenclature validation failed!"
          echo "Please ensure all files follow the nomenclature standard v5.0:"
          echo "[ATA_ROOT]_[PROJECT]_[PROGRAM]_[VARIANT]_[BLOCK]_[PHASE]_[KNOT_TASK]_[AoR]__[SUBJECT]_[TYPE]_[VERSION]_[STATUS].[EXT]"
          echo ""
          echo "See docs/standards/NOMENCLATURE_v5_0.md for details."
          echo "Quick ref: docs/standards/NOMENCLATURE_v5_0_QUICKREF.md"
          exit 1
      
      - name: Validation success
        if: steps.validate.outcome == 'success'
        run: |
          echo "✅ All files comply with nomenclature standard v5.0!"
